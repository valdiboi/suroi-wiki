---
interface Props {
  title?: string;
  frontmatter?: Record<string, any>;
  collection?: CollectionKey;
  idString?: string
}

import { ViewTransitions } from "astro:transitions";
import NavSideBar from "../components/navbar/NavSideBar.svelte";
import SearchBar from "../components/SearchBar.svelte";
import Notice from "../components/article/Notice.svelte";
import "@fontsource/inter";
import type { CollectionKey } from "astro:content";

const { title, frontmatter, collection, idString } = Astro.props;
import NavBar from "@components/navbar/NavBar.svelte";
---

<style is:global>
  @tailwind base;
  @tailwind components;
  @tailwind utilities;

  html {
    @apply scroll-smooth;
  }

  @layer base {
    :root {
      --background: 0 0% 100%;
      --foreground: 20 14.3% 4.1%;
      --card: 0 0% 100%;
      --card-foreground: 20 14.3% 4.1%;
      --popover: 0 0% 100%;
      --popover-foreground: 20 14.3% 4.1%;
      --primary: 24.6 95% 53.1%;
      --primary-foreground: 60 9.1% 97.8%;
      --secondary: 60 4.8% 95.9%;
      --secondary-foreground: 24 9.8% 10%;
      --muted: 60 4.8% 95.9%;
      --muted-foreground: 25 5.3% 44.7%;
      --accent: 60 4.8% 95.9%;
      --accent-foreground: 24 9.8% 10%;
      --destructive: 0 84.2% 60.2%;
      --destructive-foreground: 60 9.1% 97.8%;
      --border: 0 0% 50%;
      --input: 20 5.9% 90%;
      --ring: 24.6 95% 53.1%;
      --radius: 0.5rem;

      --suroi: 27, 100%, 50%;
    }

    .dark {
      --background: 0 0% 12.5%;
      --foreground: 60 9.1% 97.8%;
      --card: 20 14.3% 4.1%;
      --card-foreground: 60 9.1% 97.8%;
      --popover: 20 14.3% 4.1%;
      --popover-foreground: 60 9.1% 97.8%;
      --primary: 209, 60%, 51%;
      --primary-foreground: 60 9.1% 97.8%;
      --secondary: 12 6.5% 15.1%;
      --secondary-foreground: 60 9.1% 97.8%;
      --muted: 12 6.5% 15.1%;
      --muted-foreground: 24 5.4% 63.9%;
      --accent: 12 6.5% 15.1%;
      --accent-foreground: 60 9.1% 97.8%;
      --destructive: 0 72.2% 50.6%;
      --destructive-foreground: 60 9.1% 97.8%;
      --border: 0 0% 50%;
      --input: 12 6.5% 15.1%;
      --ring: 209, 97%, 51%;
    }

    .ReactCollapse--collapse {
      transition: height 500ms;
    }
  }
</style>

<html lang="en">
  <head>
    <title>{title ? `${title} | Suroi Wiki` : `Suroi Wiki`}</title>
    <ViewTransitions />

    <!-- META TAGS -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="theme-color" content="#ff7300" />
    <meta
      name="description"
      content="The official wiki for Suroi, an open-source 2D battle royale game inspired by surviv.io."
    />

    <!-- OpenGraph -->
    <meta name="og:type" content="website" />

    {
      collection && idString ? (
        // Opengraph for articles
        <>
          <meta name="og:image" content={`/og/${collection}_${idString}.png`} />
          <meta name="og:image:width" content="1280" />
          <meta name="og:image:height" content="720" />
        </>
      ) : (
        <>
          <meta name="og:image" content="/img/seo/ogembed.png" />
          <meta name="og:image:width" content="1080" />
          <meta name="og:image:height" content="1080" />
        </>
      )
    }

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <!-- END META TAGS -->
  </head>
  <body class="bg-background dark font-sans scroll-smooth">
    <div class="flex flex-col">
      <NavBar client:load />
      <article
        class="my-16 print:m-0 mx-auto p-4 min-h-screen max-w-6xl prose prose-invert prose-a:text-orange-500"
        transition:animate="fade"
      >
        <div class="my-8">
          <Notice
            emoteID="sweating_face"
            text="We are currently refactoring the wiki. Bugs and incomplete content may show up and we would like you to report them at the GitHub or at the Discord Server!"
          />
        </div>
        <h1 class="mb-4">{title ?? frontmatter?.title}</h1>
        <slot />
      </article>
    </div>
  </body>
</html>
